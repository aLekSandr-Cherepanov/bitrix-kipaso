$(function(){function m(e,t){var r,l,n,o,c,m;0<t&&(0<(r=$("#catalogElement .mainTool .priceContainer .priceVal")).length&&(l=r.html().replace(/\d\.\d/g,"").replace(/[0-9]/g,"")),0<(n=$("#catalogElement .mainTool .price .discount")).length&&(o=n.html().replace(/\d\.\d/g,"").replace(/[0-9]/g,"")),0<(c=$("#catalogElement .mainTool .price .economy")).length&&(m=c.html().replace(/\d\.\d/g,"").replace(/[0-9]/g,"")),"object"==typeof(e=void 0!==(e=e.data("extended-price"))&&"string"==typeof e?$.parseJSON(e):e))&&$.each(e,function(e,a){null==a.QUANTITY_FROM&&null==a.QUANTITY_TO||(null==a.QUANTITY_FROM||""!=a.QUANTITY_FROM&&t>=a.QUANTITY_FROM)&&(null==a.QUANTITY_TO||""!=a.QUANTITY_TO&&t<=a.QUANTITY_TO)&&(void 0!==a.DISCOUNT_PRICE&&r.html(formatPrice(Number(a.DISCOUNT_PRICE).toFixed(0))+l),void 0!==a.OLD_PRICE&&n.html(formatPrice(Number(a.OLD_PRICE).toFixed(0))+o),void 0!==a.ECONOMY)&&c.html(formatPrice(Number(a.ECONOMY).toFixed(0))+m)})}$(document).on("click","#catalogElement .qtyBlock .plus",function(e){var a=$("#catalogElement .mainTool .qtyBlock .qty"),t=$("#catalogElement .addCart.changeQty"),r=Number(a.val()),l=Number(a.data("step")),r=Number((10*r+10*l)/10),l=a.data("enable-trace"),n=Number(a.data("max-quantity")),o=!1;return"Y"==l&&r!=(r=n<r?n:r)&&(o=!0),a.val(r),t.data("quantity",r),m(a,r),!0===o?a.addClass("error"):a.removeClass("error"),e.preventDefault()}),$(document).on("click","#catalogElement .qtyBlock .minus",function(e){var a=$("#catalogElement .mainTool .qtyBlock .qty"),t=$("#catalogElement .addCart.changeQty"),r=Number(a.val()),l=Number(a.data("step")),r=Number((10*r-10*l)/10),n=a.data("enable-trace"),o=Number(a.data("max-quantity")),c=!1,r=l<r?r:l;return"Y"==n&&r!=(r=o<r?o:r)&&(c=!0),a.val(r),t.data("quantity",r),m(a,r),!0===c?a.addClass("error"):a.removeClass("error"),e.preventDefault()}),$(document).on("change","#catalogElement .qtyBlock .qty",function(e){var a=$(this),t=$("#catalogElement .addCart.changeQty"),r=a.val(),l=Number(a.data("step")),n=a.data("enable-trace"),o=Number(a.data("max-quantity")),c=!1,r=r.replace(/[^\d.]/gi,"")!=r?l:Number(r);xQtyExpression=Math.ceil(r/l)*l,"Y"==n&&xQtyExpression!=(xQtyExpression=xQtyExpression>o?o:xQtyExpression)&&(c=!0),a.val(xQtyExpression),t.data("quantity",xQtyExpression),m(a,xQtyExpression),!0===c?a.addClass("error"):a.removeClass("error")})});
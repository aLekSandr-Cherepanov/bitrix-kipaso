var createZoomer;$(function(){createZoomer=function(){m=$("body"),e=$("#pictureContainer"),f=e.find(".zoom"),x=v=g=0,b=f.length-1};function t(e){return e.preventDefault($("#zoomer").remove())}function o(e){return++g>b&&(g=0),e.preventDefault(n(g))}function i(e){return--g<0&&(g=b),e.preventDefault(n(g))}function n(e){var t=100*e;return p.finish().animate({left:"-"+t+"%"},300),z(e),event.preventDefault()}var a,s,p,d,l,c,r,h,u,m=$("body"),e=$("#pictureContainer"),f=e.find(".zoom"),g=0,v=0,x=0,b=f.length-1,z=function(e){c.removeClass("selected").eq(e).addClass("selected")};$(window).on("resize",function(){a&&(p.height($(window).height()-120),x=p[0].offsetWidth,v=x/(b+1))}),$(document).on("click","#zoomer #zoomerMoreImagesContainer .item",function(e){return g=$(this).index(),n(g),e.preventDefault()}),$(document).on("click","#zoomerNextMore, #zoomerBigNextMore",o),$(document).on("click","#zoomerPrevMore, #zoomerBigPrevMore",i),$(document).on("click","#zoomerExitLink",t),$(document).on("click",".zoom",function(e){var n,t,o,i,r;return"undefined"!=typeof noZoomer&&!0===noZoomer?noZoomer=!1:(t=$(this),startPosition=t.parents(".item").index(),a=$("<div />",{id:"zoomer"}).css({backgroundColor:"#ffffff",position:"fixed",height:"100%",width:"100%",zIndex:9999,left:0,top:0}),s=$("<div />",{id:"zoomerImageContainer"}).css({transform:"translateX(-50%) translateY(-50%)",position:"absolute",height:"100%",width:"100%",left:"50%",top:"50%"}),p=$("<div />",{id:"imageContainerSlider"}),d=$("<div />",{id:"zoomerMoreImagesContainer"}).css({border:"1px solid #e7e8ea",position:"absolute",textAlign:"center",lineHeight:"100px",overflowX:"auto",overflowY:"hidden",height:"100px",width:"100%",bottom:"0px",zIndex:"99",left:"0px"}),l=$("<div />",{id:"zoomerMoreImagesContainerWrapper"}).css({boxSizing:"border-box",display:"inline-block",verticalAlign:"middle",position:"relative",padding:"0px 80px",height:"100px",width:"auto"}),p.css({width:100*f.length+"%",height:$(window).height()-120,position:"relative",overflow:"hidden",left:"-"+100*startPosition+"%"}),0<b&&p.css({cursor:"move"}),n=0,f.each(function(e,t){var o,t=$(t),i=t.data("large-picture"),t=t.data("small-picture");""!=i&&(t=$("<a />",{class:"link",href:"#"}).css({backgroundImage:"url("+t+")",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"contain",display:"inline-block",verticalAlign:"middle",position:"relative",height:"50px",width:"70px"}),o=$("<div />",{class:"item"}).css({boxSizing:"border-box",overflow:"hidden",lineHeight:"100px",marginLeft:0==n?"0px":"12px",height:"100px",float:"left",width:"80px",opacity:"0.6"}),i=$("<div />",{class:"item"}).css({width:100/f.length+"%",position:"relative",textAlign:"center",height:"100%",float:"left"}).append($("<img />",{src:i}).css({position:"absolute",maxHeight:"90%",maxWidth:"90%",margin:"auto",bottom:"0",right:"0",left:"0",top:"0"})),n==startPosition&&o.addClass("selected"),p.append(i),l.append(o.append(t)),n++)}),1<f.length&&(t=$("<a />",{id:"zoomerBigNextMore"}).css({transform:"translateY(-50%)",position:"absolute",cursor:"pointer",right:"24px",height:"110px",width:"57px",top:"50%"}),r=$("<a />",{id:"zoomerBigPrevMore"}).css({transform:"translateY(-50%)",position:"absolute",cursor:"pointer",height:"110px",width:"57px",left:"24px",top:"50%"}),o=$("<a />",{id:"zoomerNextMore"}).css({transform:"translateY(-50%)",position:"absolute",cursor:"pointer",right:"0px",height:"60px",width:"80px",top:"50%"}),i=$("<a />",{id:"zoomerPrevMore"}).css({transform:"translateY(-50%)",position:"absolute",cursor:"pointer",height:"60px",width:"80px",left:"0px",top:"50%"}),s.append(r).append(t),l.append(o).append(i)),c=l.find(".item"),r=$("<a />",{href:"#",id:"zoomerExitLink"}).css({position:"absolute",right:"24px",top:"24px"}),m.append(a.append(s.prepend(p)).append(d.append(l)).append(r)),setTimeout(function(){a.addClass("opened")},2),x=p[0].offsetWidth,v=x/(b+1),e.preventDefault())}),$(document).on("keydown",function(e){if($("#zoomer").is(":visible"))return 37==e.which||40==e.which&&$("#zoomer").is(":visible")?e.preventDefault(i(e)):39==e.which||38==e.which&&$("#zoomer").is(":visible")?e.preventDefault(o(e)):27==e.which&&$("#zoomer").is(":visible")?e.preventDefault(t(e)):void 0}),$(document).on("mousedown touchstart","#imageContainerSlider",function(e){return 0<b&&(e.pageX=("touchstart"==e.type?e.originalEvent.touches[0]:e).pageX,r=parseInt(p.css("left"),10),h=e.pageX,u=!0),e.preventDefault()}),$(document).on("mousemove touchmove",function(e){u&&(e.pageX=("touchmove"==e.type?e.originalEvent.touches[0]:e).pageX,p.css("left",r-(h-e.pageX)+"px"))}),$(document).on("mouseup touchend",function(e){var t,o;u&&(t=parseInt(p.css("left"),10),u=!1,0<t?(p.finish().animate({left:0},200),z(0)):x-v<Math.abs(t)?(p.animate({left:"-"+100*b+"%"},200),z(b)):(o=r-t,o=60<Math.abs(o)?Math.abs(o)==o?Math.ceil(Math.abs(t)/v):Math.floor(Math.abs(t)/v):Math.ceil(Math.abs(r)/v),p.finish().animate({left:"-"+100*o+"%"},200),z(o)))})});
<?php
// Самый простой скрипт для имитации импорта без использования сложных функций
echo "<h1>Минимальная версия импорта OWEN</h1>";
echo "<p>PHP версия: " . phpversion() . "</p>";

// Проверка наличия файла (без использования сложных функций)
$jsonFilePath = $_SERVER['DOCUMENT_ROOT'] . '/owenAPI.json';
echo "<p>Путь к JSON файлу: " . $jsonFilePath . "</p>";

if (@file_exists($jsonFilePath)) {
    echo "<p style='color:green'>Файл существует</p>";
    
    // Пробуем прочитать файл
    $jsonContent = @file_get_contents($jsonFilePath);
    if ($jsonContent !== false) {
        echo "<p>Файл успешно прочитан. Размер: " . strlen($jsonContent) . " байт</p>";
        
        // Выводим первые 100 символов
        echo "<p>Первые 100 символов: " . htmlspecialchars(substr($jsonContent, 0, 100)) . "...</p>";
        
        // Создаем тестовую структуру данных для имитации импорта
        echo "<h2>Имитация импорта</h2>";
        
        echo "<p>Создание тестового инфоблока (без реального подключения к Битриксу)...</p>";
        echo "<p>Добавление тестовых элементов...</p>";
        echo "<p>Импорт завершен успешно (имитация).</p>";
    } else {
        echo "<p style='color:red'>Не удалось прочитать содержимое файла</p>";
    }
} else {
    echo "<p style='color:red'>Файл не найден. Пожалуйста, убедитесь, что файл owenAPI.json загружен в корень сайта.</p>";
}

echo "<hr>";
echo "<h2>Рекомендации:</h2>";
echo "<ol>";
echo "<li>Убедитесь, что файл owenAPI.json находится в корне сайта</li>";
echo "<li>Проверьте права доступа к файлу (должен быть доступен для чтения веб-сервером)</li>";
echo "<li>Если вы видите эту страницу без ошибок, значит проблема в более сложных функциях PHP или настройках Битрикса</li>";
echo "</ol>";
?>
